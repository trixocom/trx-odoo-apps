<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">
    <!-- Extend LLMChatContainer to add media generation form for generation models -->
    <t
    t-name="llm_thread.LLMChatContainer"
    t-inherit="llm_thread.LLMChatContainer"
    t-inherit-mode="extension"
  >
        <!-- Replace the composer area to add media generation form conditionally -->
        <xpath expr="//div[hasclass('o-llm-composer-area')]" position="replace">
            <div class="o-llm-composer-area border-top p-3">
                <!-- Check if this is a media generation model -->
                <t
          t-set="isMediaGenModel"
          t-value="isMediaGenerationModel(activeThread)"
        />

                <!-- Media Generation Form - Show for generation models -->
                <t t-if="isMediaGenModel">
                    <div class="card border shadow-sm">
                        <div
              class="card-header bg-light d-flex justify-content-between align-items-center py-2"
            >
                            <h6 class="m-0 d-flex align-items-center">
                                <i class="fa fa-image me-2 text-primary" />
                                <span>Media Generation</span>
                            </h6>
                        </div>
                        <div class="card-body p-0">
                            <LLMMediaForm threadId="activeThread.id" />
                        </div>
                    </div>
                </t>

                <!-- Standard Composer - Show for chat models -->
                <t t-else="">
                    <Composer
            t-if="threadComposer"
            composer="threadComposer"
            mode="'compact'"
          />
                </t>
            </div>
        </xpath>
    </t>
</templates>
